# Guardian Acceptance Test Manifest
# PRD: UE-A Workflow Config & SLA Engine
# Generated by s3-guardian from phase1-ue-a-workflow-config-sla.md (1727 lines)
# Date: 2026-02-21

prd_id: "PRD-UEA-001"
prd_title: "Workflow Config & SLA Engine"
created_at: "2026-02-21T08:00:00+11:00"
created_by: "s3-guardian"
impl_repo: "/Users/theb/Documents/Windsurf/zenagent2/zenagent/agencheck"

# Scoring thresholds
thresholds:
  accept: 0.60
  investigate: 0.40
  reject: 0.40

# Validation protocol
validation_protocol:
  evidence_sources:
    - git_diff
    - file_contents
    - test_results
    - api_responses
    - browser_verification
  require_test_execution: true
  time_limit_hours: 4

# Features with weights (sum = 1.00)
features:
  - name: "Epic A1 — Config Backend & Resolution"
    description: "Database schema (check_types + background_check_sequence), CRUD API, sequence resolution (client > default > system), Clerk RBAC, multi-tenancy"
    weight: 0.30
    scenarios:
      - "database_schema_migration_035"
      - "crud_api_endpoints"
      - "sequence_resolution_logic"
      - "rbac_enforcement"

  - name: "Epic A4 — Frontend Workflow Matrix UI"
    description: "Complete existing /check-sla-configuration page, wire to backend API, display/edit check sequences, Clerk RBAC for management edits"
    weight: 0.25
    scenarios:
      - "frontend_page_renders_data"
      - "frontend_crud_wired_to_backend"
      - "frontend_rbac_enforcement"

  - name: "Epic A2 — Prefect Flow Integration"
    description: "resolve_check_sequence() reads from DB, retry intervals from JSONB, subflow execution with audit trail, human-in-the-loop support"
    weight: 0.20
    scenarios:
      - "prefect_reads_db_config"
      - "retry_intervals_from_sequence"
      - "audit_trail_in_background_tasks"

  - name: "Epic A3 — Reminder Sequences (GAP 13)"
    description: "Text file templates for work_history emails, template loading/rendering service, automated follow-up task creation"
    weight: 0.15
    scenarios:
      - "email_templates_exist"
      - "template_rendering_service"
      - "automated_followup_tasks"

  - name: "Cross-Cutting — Versioning, Security & Caching"
    description: "Sequence versioning (update creates new version, archives old), multi-tenancy isolation, parameterized queries, config resolution caching"
    weight: 0.10
    scenarios:
      - "sequence_versioning"
      - "security_and_multitenancy"

total_weight: 1.00
