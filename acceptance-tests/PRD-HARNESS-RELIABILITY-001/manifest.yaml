# Guardian Acceptance Test Manifest
# PRD-HARNESS-RELIABILITY-001: Harness Reliability + Setup Hook Integration
# Generated by: s3-guardian
# Date: 2026-02-20T00:03:58Z
#
# BLIND RUBRIC: Operators CANNOT see this file.
# Scoring is 0.0-1.0 gradient per scenario.

prd_id: "PRD-HARNESS-RELIABILITY-001"
prd_title: "Harness Reliability + Setup Hook Integration"
created_at: "2026-02-20T00:03:58Z"
created_by: "s3-guardian"
impl_repo: "/Users/theb/Documents/Windsurf/claude-harness-setup"

# Scoring thresholds
thresholds:
  accept: 0.60
  investigate: 0.40
  reject: 0.40

# Validation protocol
validation_protocol:
  evidence_sources:
    - git_diff
    - file_contents
    - cli_execution
  require_test_execution: true
  time_limit_hours: 2

# Features with weights (sum = 1.00)
features:
  - name: "F1 — Setup-Harness Hook Auto-Installation"
    description: "Running /setup-harness on a git repo automatically installs pre-push hook via symlink. Non-git directories handled gracefully. Existing hooks not overwritten."
    weight: 0.35
    scenarios:
      - "setup_harness_installs_hook"
      - "setup_harness_skips_non_git"
      - "setup_harness_preserves_existing_hook"
      - "setup_harness_next_steps_updated"

  - name: "F2 — Worktree-Safe Hook Symlinks"
    description: "cli.py install-hooks creates symlinks that survive worktree removal by resolving to main working tree path, not worktree path."
    weight: 0.25
    scenarios:
      - "install_hooks_resolves_to_main_tree"
      - "symlink_survives_worktree_removal"

  - name: "F3 — Example DOT File Reset"
    description: "full-initiative.dot example file has all nodes in clean/pending state with no test pollution."
    weight: 0.15
    scenarios:
      - "example_dot_all_pending"

  - name: "F4 — cs-store-validation DX"
    description: "cs-store-validation --help works correctly, prints usage, exits cleanly."
    weight: 0.15
    scenarios:
      - "cs_store_validation_help"
      - "cs_store_validation_no_args"

  - name: "F5 — Integration Coherence"
    description: "All changes work together: harness deployed to fresh git repo installs hooks that point to correct paths."
    weight: 0.10
    scenarios:
      - "end_to_end_fresh_repo"

total_weight: 1.00
